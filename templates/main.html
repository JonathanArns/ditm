<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
	<title>ditm</title>
</head>
<body>
	<h1>ditm</h1>
	<ul class="nav justify-content-center">
		{{if .ModeDefault}}
			<a class="nav-link" href="/start_recording">Start Recording</a>
			<a class="nav-link" href="/stop_recording">Stop Recoring</a>
			<a class="nav-link" href="/save_volumes">Save Volumes</a>
		{{end}}
		{{if .ModeRecording}}
			<a class="nav-link" href="/stop_recording">Stop Recoring</a>
		{{end}}
		{{if .ModeReplaying}}
			<a class="nav-link" href="/">Cancel Replay</a>
		{{end}}
		{{if .ModeInspecting}}
			<a class="nav-link" href="/">Home</a>
			<a class="nav-link" href="/start_recording">Start Recording</a>
			<a class="nav-link" href="/stop_recording">Stop Recoring</a>
			<a class="nav-link" href="/save_volumes">Save Volumes</a>
		{{end}}
	</ul>
	{{range .Recordings}}
		<a href="/start_replay?id={{.}}">Start Replay {{.}}</a>
		<a href="/load_recording?id={{.}}">Show Replay {{.}}</a>
	{{end}}
	{{range .Volumes}}
		<a href="/load_volumes?id={{.}}">Load Volumes {{.}}</a>
	{{end}}
	<div id="table_container" class="container"></div>
	<script>
		let context = {{.}}
		let source = new EventSource("/live_updates")
		source.onopen = function(e) {
			console.log("open")
		}
		source.onerror = function(e) {
			console.log("error")
		}
		source.onmessage = function(e) {
			document.getElementById("table_container").innerHTML = e.data
		}
	</script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj" crossorigin="anonymous"></script>
</body>
</html>
